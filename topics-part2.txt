                    // Fallback to modal for topics without direct URLs
                    this.currentTopic = topic;
                    this.populateModal(topic);
                    this.showModal();
                }
            }

            populateModal(topic) {
                document.getElementById('modalTitle').textContent = topic.title;
                document.getElementById('modalCategory').textContent = topic.category.replace('-', ' ');
                document.getElementById('modalDifficulty').textContent = topic.difficulty;
                document.getElementById('modalDifficulty').className = `difficulty-badge difficulty-${topic.difficulty}`;
                document.getElementById('modalDescription').textContent = topic.description;
                document.getElementById('modalProgress').style.width = `${topic.progress}%`;
                document.getElementById('modalProgressText').textContent = `${topic.progress}% Complete`;

                // Concepts
                const conceptsContainer = document.getElementById('modalConcepts');
                conceptsContainer.innerHTML = topic.concepts.map(concept => 
                    `<span class="concept-tag">${concept}</span>`
                ).join('');

                // Content
                const content = topic.content || 'Detailed content for this topic will be available soon.';
                document.getElementById('modalContent').innerHTML = `<p class="text-gray-warm">${content}</p>`;

                // Action buttons
                const markCompleteBtn = document.getElementById('markCompleteBtn');
                markCompleteBtn.textContent = topic.progress === 100 ? 'Completed' : 'Mark as Complete';
                markCompleteBtn.disabled = topic.progress === 100;

                const bookmarkBtn = document.getElementById('bookmarkBtn');
                bookmarkBtn.textContent = topic.bookmarked ? '★ Bookmarked' : '☆ Bookmark';
            }

            showModal() {
                const modal = document.getElementById('topicModal');
                if (modal) {
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }
            }

            closeModal() {
                const modal = document.getElementById('topicModal');
                if (modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            }

            markComplete(topicId) {
                const topic = this.topics.find(t => t.id === topicId);
                if (topic && topic.progress < 100) {
                    topic.progress = 100;
                    this.saveTopics();
                    this.applyFilters();
                    this.updateStats();
                    this.showNotification('Topic marked as complete!', 'success');
                }
            }

            markCurrentComplete() {
                if (this.currentTopic) {
                    this.markComplete(this.currentTopic.id);
                    this.populateModal(this.currentTopic);
                }
            }

            toggleBookmark(topicId) {
                const topic = this.topics.find(t => t.id === topicId || t.id === this.currentTopic?.id);
                if (topic) {
                    topic.bookmarked = !topic.bookmarked;
                    this.saveTopics();
                    this.applyFilters();
                    this.showNotification(topic.bookmarked ? 'Topic bookmarked!' : 'Bookmark removed', 'info');
                }
            }

            editTopic() {
                if (this.currentTopic) {
                    // Redirect to manage page with topic ID
                    window.location.href = `manage.html?edit=${this.currentTopic.id}`;
                }
            }

            setView(view) {
                this.currentView = view;
                this.renderTopics();
                
                // Update button states
                document.getElementById('gridViewBtn')?.classList.toggle('action-btn-primary', view === 'grid');
                document.getElementById('gridViewBtn')?.classList.toggle('action-btn-secondary', view !== 'grid');
                document.getElementById('listViewBtn')?.classList.toggle('action-btn-primary', view === 'list');
                document.getElementById('listViewBtn')?.classList.toggle('action-btn-secondary', view !== 'list');
            }

            toggleMobileSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('mobileOverlay');
                
                sidebar?.classList.toggle('mobile-open');
                overlay?.classList.toggle('active');
            }

            closeMobileSidebar() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('mobileOverlay');
                
                sidebar?.classList.remove('mobile-open');
                overlay?.classList.remove('active');
            }

            clearAllFilters() {
                // Reset all checkboxes
                document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
                    checkbox.checked = true;
                });

                // Reset search
                const searchInput = document.getElementById('searchInput');
                if (searchInput) {
                    searchInput.value = '';
                }

                // Reset filters
                this.activeFilters = {
                    categories: [],
                    difficulties: ['beginner', 'intermediate', 'advanced'],
                    progress: ['not-started', 'in-progress', 'completed']
                };
                this.searchQuery = '';

                this.applyFilters();
            }

            updateStats() {
                const stats = this.calculateStats();
                
                document.getElementById('totalTopics').textContent = stats.total;
                document.getElementById('completedTopics').textContent = stats.completed;
                document.getElementById('inProgressTopics').textContent = stats.inProgress;
            }

            calculateStats() {
                return {
                    total: this.filteredTopics.length,
                    completed: this.filteredTopics.filter(t => t.progress === 100).length,
                    inProgress: this.filteredTopics.filter(t => t.progress > 0 && t.progress < 100).length
                };
            }

            checkUrlParams() {
                const params = new URLSearchParams(window.location.search);
                const category = params.get('category');
                
                if (category) {
                    // Filter by category
                    this.activeFilters.categories = [category];
                    document.querySelectorAll('.filter-checkbox').forEach(checkbox => {
                        if (checkbox.value === category) {
                            checkbox.checked = true;
                        } else if (checkbox.closest('#categoryFilters')) {
                            checkbox.checked = false;
                        }
                    });
                    this.applyFilters();
                }

                // Check for selected topic
                const selectedTopicId = localStorage.getItem('selectedTopicId');
                if (selectedTopicId) {
                    this.viewTopic(parseInt(selectedTopicId));
                    localStorage.removeItem('selectedTopicId');
                }
            }

            initializeAnimations() {
                // Fade in elements
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('animated');
                        }
                    });
                }, { threshold: 0.1 });

                document.querySelectorAll('.fade-in').forEach(el => {
                    observer.observe(el);
                });
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg text-white font-semibold transform translate-x-full transition-transform duration-300`;
                notification.style.background = type === 'success' ? 'var(--success-green)' : 'var(--copper-accent)';
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.transform = 'translateX(0)';
                }, 100);
                
                setTimeout(() => {
                    notification.style.transform = 'translateX(100%)';
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 300);
                }, 3000);
            }
        }

        // Initialize the topics page
        let topicsPage;
        document.addEventListener('DOMContentLoaded', () => {
            topicsPage = new TopicsPage();
        });
    </script>
    
    <script>
        // Simplified topics data for testing
        const testTopics = [
            {
                id: 1,
                title: "Introduction to Generative AI",
                category: "fundamentals",
                difficulty: "beginner",
                description: "Learn the fundamentals of generative AI, how Large Language Models work, and their core capabilities in content generation.",
                concepts: ["Generative AI", "LLMs", "Content Generation", "AI Fundamentals"],
                featured: true,
                progress: 0,
                content: "Introduction to Generative AI content..."
            },
            {
                id: 2,
                title: "Exploring and Comparing LLMs",
                category: "fundamentals",
                difficulty: "beginner",
                description: "Understand different types of Large Language Models, compare their capabilities, and learn how to select the right model for your use case.",
                concepts: ["Model Comparison", "GPT", "Claude", "Llama", "Model Selection"],
                featured: true,
                progress: 0,
                content: "Exploring and Comparing LLMs content..."
            },
            {
                id: 3,
                title: "Using Generative AI Responsibly",
                category: "fundamentals",
                difficulty: "beginner",
                description: "Learn the principles of Responsible AI, ethical considerations, and best practices for building trustworthy AI applications.",
                concepts: ["Responsible AI", "Ethics", "Bias", "Fairness", "Transparency"],
                featured: false,
                progress: 0,
                content: "Using Generative AI Responsibly content..."
            },
            {
                id: 4,
                title: "Prompt Engineering Fundamentals",
                category: "implementation",
                difficulty: "beginner",
                description: "Master the art and science of crafting effective prompts to guide AI models toward desired outputs and behaviors.",
                concepts: ["Prompt Engineering", "Zero-shot", "Few-shot", "Chain-of-Thought", "System Prompts"],
                featured: true,
                progress: 0,
                content: "Prompt Engineering Fundamentals content..."
            },
            {
                id: 5,
                title: "Retrieval-Augmented Generation (RAG)",
                category: "implementation",
                difficulty: "intermediate",
                description: "Learn how to enhance LLM responses with external knowledge using RAG techniques and vector databases.",
                concepts: ["RAG", "Vector Databases", "Embeddings", "Semantic Search", "Knowledge Retrieval"],
                featured: true,
                progress: 0,
                content: "Retrieval-Augmented Generation content..."
            },
            {
                id: 6,
                title: "Building AI Agents",
                category: "architecture",
                difficulty: "intermediate",
                description: "Create autonomous AI agents that can perceive, reason, act, and learn to accomplish complex tasks.",
                concepts: ["AI Agents", "Autonomous Systems", "Tool Use", "Planning", "Multi-Agent Systems"],
                featured: true,
                progress: 0,
                content: "Building AI Agents content..."
            },
            {
                id: 7,
                title: "LangChain Framework",
                category: "frameworks",
                difficulty: "intermediate",
                description: "Master LangChain for building applications with language models using chains, agents, and memory systems.",
                concepts: ["LangChain", "Chains", "Agents", "Memory", "Tools", "Prompts"],
                featured: true,
                progress: 0,
                content: "LangChain Framework content..."
            },
            {
                id: 8,
                title: "Vector Databases for AI Applications",
                category: "architecture",
                difficulty: "intermediate",
                description: "Learn about vector databases, embeddings, and semantic search for building scalable AI applications.",
                concepts: ["Vector Databases", "Embeddings", "Semantic Search", "Similarity Search", "Pinecone", "Chroma"],
                featured: false,
                progress: 0,
                content: "Vector Databases content..."
            },
            {
                id: 9,
                title: "Fine-Tuning Large Language Models",
                category: "advanced",
                difficulty: "advanced",
                description: "Learn advanced techniques for fine-tuning LLMs on custom datasets to improve performance on specific tasks.",
                concepts: ["Fine-tuning", "Transfer Learning", "Custom Datasets", "PEFT", "LoRA", "QLoRA"],
                featured: false,
                progress: 0,
                content: "Fine-Tuning LLMs content..."
            },
            {
                id: 10,
                title: "AutoGen Multi-Agent Framework",
                category: "frameworks",
                difficulty: "advanced",
                description: "Build sophisticated multi-agent systems with AutoGen's conversational approach to AI agent orchestration.",
                concepts: ["AutoGen", "Multi-Agent Systems", "Conversational AI", "Agent Orchestration", "Microsoft Research"],
                featured: true,
                progress: 0,
                content: "AutoGen Framework content..."
            }
        ];
        
        // Make topics available globally
        window.allTopics = testTopics;
        console.log('Loaded', testTopics.length, 'topics for testing');
    </script>
</body>
</html>